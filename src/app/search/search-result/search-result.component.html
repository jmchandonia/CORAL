<div class="row mb-3 mt-3 search-nav-bar">
  <div class="ml-4" [routerLink]="previousUrl">
    <i class="material-icons back-icon">keyboard_arrow_left</i>
    <span class="menu-option">Go Back</span>
    <span 
    class="menu-option col-2" 
  (click)="showQuery = true"
    *ngIf="!showQuery"
    >| &nbsp;&nbsp;Show Query</span>
  <span
    class="menu-option col-2"
    (click)="showQuery = false"
    *ngIf="showQuery"
    >| &nbsp;&nbsp;Hide Query</span>
  </div>
  <div *ngIf="staticResults" style="align-self: flex-end; position:absolute" class="mr-6">
    <button class="btn btn-light mr-1" style="display: inline-flex; justify-content: center;">
      <i class="material-icons mr-1">bar_chart</i>
       Plot All Results
    </button>
    <button class="btn btn-light" style="display: inline-flex; justify-content: center;">
      <i class="material-icons mr-1">cloud_download</i>
       Download All Results
    </button>
  </div>
</div>
<div class="row justify-content-center" *ngIf="showQuery">
  <div class="query-container col-10">
    <pre>{{ searchQuery | json }}</pre>
  </div>
</div>
<hr />
<div class="row justify-content-center">
  <div class="loading-container" *ngIf="loading">
      <ngx-spinner
      bdColor="rgba(0,0,0,0)"
      color="#aaa"
      size="medium"
      type="ball-spin-fade-rotating"
      [fullScreen]="false"
    ></ngx-spinner>
  </div>
  <div class="no-results-container" *ngIf="!loading && !results.length">
    <span>
      No results match these queries. <a [routerLink]="previousUrl">Click here</a> to return to search.
    </span>
  </div>
  <div class="table-container col-11" *ngIf="results.length">
    <table id="search-results" style="font-size: 0.8em;" class="table" cellspacing="1">
      <thead class="table-header">
        <tr>
          <th *ngFor="let field of resultFields">{{field.name}}</th>
          <th>options</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let result of results">
          <td *ngFor="let field of resultFields">
            <span *ngIf="!isLink(result[field.name])">{{result[field.name]}}</span>
            <a *ngIf="isLink(result[field.name])" [href]="result[field.name]">
              {{result[field.name]}}
            </a>
          </td>
          <td style="width: 150px;">
            <i *ngIf="result.brick_id" class="material-icons options-icon" (click)="viewData(result.brick_id)">description</i>
            <i *ngIf="result.id" class="material-icons options-icon" (click)="viewCoreData(result.id)">description</i>
            <i *ngIf="result.brick_id" class="material-icons options-icon" (click)="useData(result.brick_id)">bar_chart</i>
            <i class="material-icons options-icon">cloud_download</i>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
